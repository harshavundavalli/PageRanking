<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>PageRankAlgo API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>PageRankAlgo</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python
# coding: utf-8

# In[1]:


#importing the required libraries
from numpy import linalg as la
import numpy as np


# In[2]:


class Graph(object):
    
    &#34;&#34;&#34;
    This class is to generate the adjancency matrix\n
    &#34;&#34;&#34;

    # Initialize the matrix
    def __init__(self,size):
        self.adjMatrix1 = np.zeros((size,size))
        self.adjMatrix2 = np.zeros((size,size))
        self.size = size

    # Add edges
    def add_edge(self, v1, v2):
        self.adjMatrix1[v1][v2] = 1
        self.adjMatrix2[v1][v2] = 1


# In[3]:


file1 = open(&#39;input.txt&#39;, &#39;r&#39;)
Lines = file1.readlines()

nodes = int(Lines[0])
connections = int(Lines[1])

g = Graph(nodes)

for i in range(2,connections+2):
    x,y = Lines[i].split(&#39;,&#39;)
    x,y = int(x),int(y)
    g.add_edge(x-1,y-1)
mat = g.adjMatrix1
mat = mat.transpose()
mat


# In[4]:


mat1 = mat


# In[5]:


mat = np.array(mat,dtype=np.float32)


# In[6]:


mat


# In[7]:


for i in range(len(mat[0])):
    mat[:,i] = mat[:,i]/sum(mat[:,i])


# In[8]:


mat


# In[9]:


alpha = 0.1
matTr = (1-alpha)*mat 
#+ (alpha/len(mat))*np.ones(mat.shape)
A = matTr==0
A = np.array(A,dtype = np.float32)
for i in range(len(A[0])):
    A[:,i] = A[:,i]/sum(A[:,i])
matTr = matTr + alpha*A


# In[10]:


matTr


# In[11]:


lamdas, evs = la.eig(mat)


# In[12]:


def findIndex(lams):
    &#34;&#34;&#34; This gives us the index of principle eigen value &#34;&#34;&#34;
    ind = np.argmax(lams);
    #li = list(lams)
    #for i in range(len(li)):
     #   if(np.round(li[i], 4) == 1.0):
      #      ind = i
       #     break
    #print(li[ind])
    return ind


# ## Without teleportation using algebra

# In[13]:


ind = findIndex(lamdas)
lpev = evs[:,ind]
lpev = np.reshape(lpev, (lpev.shape[0],1))
lpev = lpev/(sum(sum(lpev)))
lpev


# In[14]:


sum(sum(lpev))


# In[15]:


p = []
for i in range(len(lpev)):
    p.append([1/(len(lpev))])
p = np.array(p)


# In[16]:


p


# ## Without teleportation using Iterative

# In[17]:


while True:
    tp = np.dot(mat,p)
    if(np.all(abs(tp-p) &lt; 0.00001)):
        break
    p = tp


# In[18]:


p


# In[19]:


lamdasTr, evsTr = la.eig(matTr)


# ## With teleportation using algebra

# In[20]:


ind = findIndex(lamdasTr)
lpev = evsTr[:,ind]
lpev = np.reshape(lpev, (lpev.shape[0],1))
lpev = lpev/(sum(sum(lpev)))
lpev


# In[21]:


p = []
for i in range(len(lpev)):
    p.append([1/(len(lpev))])
p = np.array(p)


# In[22]:


p


# ## With teleportation using Iterative

# In[23]:


while True:
    tp = np.dot(matTr,p)
    if(np.all(abs(tp-p) &lt; 0.00001)):
        break
    p = tp


# In[24]:


p


# In[25]:


def AlgWithoutTele(mat):
    &#34;&#34;&#34;
    Adjacency matrix of the given graph is taken as parameter for this funcion\n
    This Function generates page rank vectors without teleportation in both iterative method and the algebraic method.\n
    In algebraic method the principal left eigen vector of the gives us the page rank vectors for the given graph\n
    In iterative method a vector is taken initially and it is multiplied with the adjacency matrix until there is no much change in the vector obtained on multiplication\n
    &#34;&#34;&#34;
    mat = np.array(mat,dtype=np.float32)
    for i in range(len(mat[0])):
        mat[:,i] = mat[:,i]/sum(mat[:,i])
    lamdas, evs = la.eig(mat)
    ind = findIndex(lamdas)
    lpev = evs[:,ind]
    lpev = np.reshape(lpev, (lpev.shape[0],1))
    lpev = lpev/(sum(sum(lpev)))
    print(lpev)
    print()
    p = []
    for i in range(len(lpev)):
        p.append([1/(len(lpev))])
    p = np.array(p)
    while True:
        tp = np.dot(mat,p)
        if(np.all(abs(tp-p) &lt; 0.00001)):
            break
        p = tp
    print(p)


# In[26]:


def AlgWithTele(mat):
    &#34;&#34;&#34;
    Adjacency Matrix of the given graph is taken as parameter for this funcion\n
    This Function generates page rank vectors with teleportation in both iterative method and the algebraic method.\n
    &#34;&#34;&#34;
    mat = np.array(mat,dtype=np.float32)
    for i in range(len(mat[0])):
        mat[:,i] = mat[:,i]/sum(mat[:,i])
    alpha = 0.1
    matTr = (1-alpha)*mat 
    #+ (alpha/len(mat))*np.ones(mat.shape)
    A = matTr==0
    A = np.array(A,dtype = np.float32)
    for i in range(len(A[0])):
        A[:,i] = A[:,i]/sum(A[:,i])
    mat = matTr + alpha*A
    
    #mat = np.array(mat,dtype=np.float32)
    #for i in range(len(mat[0])):
     #   mat[:,i] = mat[:,i]/sum(mat[:,i])
    lamdas, evs = la.eig(mat)
    
    ind = findIndex(lamdas)
    lpev = evs[:,ind]
    lpev = np.reshape(lpev, (lpev.shape[0],1))
    lpev = lpev/(sum(sum(lpev)))
    print(lpev)
    print()
    p = []

    for i in range(len(lpev)):
        p.append([1/(len(lpev))])
    p = np.array(p)
    while True:
        tp = np.dot(mat,p)
        if(np.all(abs(tp-p) &lt; 0.00001)):
            break
        p = tp
    print(p)
   
    


# In[27]:


AlgWithoutTele(mat1)


# In[28]:


AlgWithTele(mat1)


# In[30]:


from networkx.generators.random_graphs import erdos_renyi_graph
import networkx as nx
import time
dict1 = {}

for i in range(4,60):
    n=i
    for j in range(6):
        p = 0.5
        graph = erdos_renyi_graph(n, p,directed = True)
        Adj = nx.adjacency_matrix(graph)
        Adj = Adj.todense()
        Adj = np.array(Adj,dtype=np.float32)
        Adj = Adj.transpose()
        #mat = np.array(mat,dtype=np.float32)
        flag = True
        for k in range(len(Adj[0])):
            val = sum(Adj[:,k])
            if val==0 :
                flag = False
                break;
            Adj[:,k] = Adj[:,k]/val
        if not flag :
            continue
        start = time.time() 
        AlgWithoutTele(Adj)
        AlgWithTele(Adj)
        end = time.time()
        time_diff = end - start
        dict1[len(graph.edges)] = time_diff
            
            
        
        
        
        
        
        
        
       


# In[31]:


import collections
dict1 = collections.OrderedDict(sorted(dict1.items()))
dict1


# In[32]:


import matplotlib.pyplot as plt

x = dict1.keys()
y = dict1.values()
 
# Plotting the Graph
plt.plot(x, y)
plt.title(&#34;Plot of Runtime vs Number of edges&#34;)
plt.xlabel(&#34;Number Of Edges&#34;)
plt.ylabel(&#34;Runtime&#34;)
plt.show()


# In[ ]:</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="PageRankAlgo.AlgWithTele"><code class="name flex">
<span>def <span class="ident">AlgWithTele</span></span>(<span>mat)</span>
</code></dt>
<dd>
<div class="desc"><p>Adjacency Matrix of the given graph is taken as parameter for this funcion</p>
<p>This Function generates page rank vectors with teleportation in both iterative method and the algebraic method.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def AlgWithTele(mat):
    &#34;&#34;&#34;
    Adjacency Matrix of the given graph is taken as parameter for this funcion\n
    This Function generates page rank vectors with teleportation in both iterative method and the algebraic method.\n
    &#34;&#34;&#34;
    mat = np.array(mat,dtype=np.float32)
    for i in range(len(mat[0])):
        mat[:,i] = mat[:,i]/sum(mat[:,i])
    alpha = 0.1
    matTr = (1-alpha)*mat 
    #+ (alpha/len(mat))*np.ones(mat.shape)
    A = matTr==0
    A = np.array(A,dtype = np.float32)
    for i in range(len(A[0])):
        A[:,i] = A[:,i]/sum(A[:,i])
    mat = matTr + alpha*A
    
    #mat = np.array(mat,dtype=np.float32)
    #for i in range(len(mat[0])):
     #   mat[:,i] = mat[:,i]/sum(mat[:,i])
    lamdas, evs = la.eig(mat)
    
    ind = findIndex(lamdas)
    lpev = evs[:,ind]
    lpev = np.reshape(lpev, (lpev.shape[0],1))
    lpev = lpev/(sum(sum(lpev)))
    print(lpev)
    print()
    p = []

    for i in range(len(lpev)):
        p.append([1/(len(lpev))])
    p = np.array(p)
    while True:
        tp = np.dot(mat,p)
        if(np.all(abs(tp-p) &lt; 0.00001)):
            break
        p = tp
    print(p)</code></pre>
</details>
</dd>
<dt id="PageRankAlgo.AlgWithoutTele"><code class="name flex">
<span>def <span class="ident">AlgWithoutTele</span></span>(<span>mat)</span>
</code></dt>
<dd>
<div class="desc"><p>Adjacency matrix of the given graph is taken as parameter for this funcion</p>
<p>This Function generates page rank vectors without teleportation in both iterative method and the algebraic method.</p>
<p>In algebraic method the principal left eigen vector of the gives us the page rank vectors for the given graph</p>
<p>In iterative method a vector is taken initially and it is multiplied with the adjacency matrix until there is no much change in the vector obtained on multiplication</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def AlgWithoutTele(mat):
    &#34;&#34;&#34;
    Adjacency matrix of the given graph is taken as parameter for this funcion\n
    This Function generates page rank vectors without teleportation in both iterative method and the algebraic method.\n
    In algebraic method the principal left eigen vector of the gives us the page rank vectors for the given graph\n
    In iterative method a vector is taken initially and it is multiplied with the adjacency matrix until there is no much change in the vector obtained on multiplication\n
    &#34;&#34;&#34;
    mat = np.array(mat,dtype=np.float32)
    for i in range(len(mat[0])):
        mat[:,i] = mat[:,i]/sum(mat[:,i])
    lamdas, evs = la.eig(mat)
    ind = findIndex(lamdas)
    lpev = evs[:,ind]
    lpev = np.reshape(lpev, (lpev.shape[0],1))
    lpev = lpev/(sum(sum(lpev)))
    print(lpev)
    print()
    p = []
    for i in range(len(lpev)):
        p.append([1/(len(lpev))])
    p = np.array(p)
    while True:
        tp = np.dot(mat,p)
        if(np.all(abs(tp-p) &lt; 0.00001)):
            break
        p = tp
    print(p)</code></pre>
</details>
</dd>
<dt id="PageRankAlgo.findIndex"><code class="name flex">
<span>def <span class="ident">findIndex</span></span>(<span>lams)</span>
</code></dt>
<dd>
<div class="desc"><p>This gives us the index of principle eigen value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def findIndex(lams):
    &#34;&#34;&#34; This gives us the index of principle eigen value &#34;&#34;&#34;
    ind = np.argmax(lams);
    #li = list(lams)
    #for i in range(len(li)):
     #   if(np.round(li[i], 4) == 1.0):
      #      ind = i
       #     break
    #print(li[ind])
    return ind</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="PageRankAlgo.Graph"><code class="flex name class">
<span>class <span class="ident">Graph</span></span>
<span>(</span><span>size)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is to generate the adjancency matrix</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Graph(object):
    
    &#34;&#34;&#34;
    This class is to generate the adjancency matrix\n
    &#34;&#34;&#34;

    # Initialize the matrix
    def __init__(self,size):
        self.adjMatrix1 = np.zeros((size,size))
        self.adjMatrix2 = np.zeros((size,size))
        self.size = size

    # Add edges
    def add_edge(self, v1, v2):
        self.adjMatrix1[v1][v2] = 1
        self.adjMatrix2[v1][v2] = 1</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="PageRankAlgo.Graph.add_edge"><code class="name flex">
<span>def <span class="ident">add_edge</span></span>(<span>self, v1, v2)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_edge(self, v1, v2):
    self.adjMatrix1[v1][v2] = 1
    self.adjMatrix2[v1][v2] = 1</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="PageRankAlgo.AlgWithTele" href="#PageRankAlgo.AlgWithTele">AlgWithTele</a></code></li>
<li><code><a title="PageRankAlgo.AlgWithoutTele" href="#PageRankAlgo.AlgWithoutTele">AlgWithoutTele</a></code></li>
<li><code><a title="PageRankAlgo.findIndex" href="#PageRankAlgo.findIndex">findIndex</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="PageRankAlgo.Graph" href="#PageRankAlgo.Graph">Graph</a></code></h4>
<ul class="">
<li><code><a title="PageRankAlgo.Graph.add_edge" href="#PageRankAlgo.Graph.add_edge">add_edge</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>